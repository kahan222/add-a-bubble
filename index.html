
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add a Bubble – Step 1</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      overflow: hidden;
      font-family: sans-serif;
      background: black;
    }
    #camera-view {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -1;
    }
    .text-carousel {
      position: absolute;
      bottom: 0;
      width: 100vw;
      height: 80px;
      display: flex;
      overflow-x: auto;
      background: rgba(0,0,0,0.4);
      padding: 6px;
      z-index: 10;
    }
    .text-option {
      background: white;
      color: black;
      border-radius: 12px;
      padding: 4px 10px;
      margin: 0 6px;
      cursor: pointer;
      font-size: 13px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
    }
    .text-option.selected {
      background: #f0f0f0;
    }
    .name-en { font-weight: bold; }
    .name-ko { font-size: 12px; color: #555; }

    #bubble-text {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 18px;
      font-weight: bold;
      max-width: 80vw;
      text-align: center;
      z-index: 5;
      display: none;
      word-break: break-word;
    }

    #toggle-lang {
      position: absolute;
      bottom: 100px;
      left: 20px;
      z-index: 10;
      background: white;
      border: none;
      border-radius: 10px;
      padding: 6px 10px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>

<video id="camera-view" autoplay playsinline muted></video>

<div class="text-carousel">
  <div class="text-option" data-id="Han1"><div class="name-en">One Sentence</div><div class="name-ko">한 문장</div></div>
  <div class="text-option" data-id="Han2"><div class="name-en">Try</div><div class="name-ko">시도</div></div>
  <div class="text-option" data-id="Han3"><div class="name-en">Life</div><div class="name-ko">삶</div></div>
  <div class="text-option" data-id="Han4"><div class="name-en">Uniqueness</div><div class="name-ko">유일함</div></div>
  <div class="text-option" data-id="Han5"><div class="name-en">Uncomfortable</div><div class="name-ko">불편함</div></div>
  <div class="text-option" data-id="Han6"><div class="name-en">Technology</div><div class="name-ko">기술</div></div>
  <div class="text-option" data-id="Han7"><div class="name-en">Imagination</div><div class="name-ko">질서</div></div>
  <div class="text-option" data-id="Han8"><div class="name-en">Incomplete</div><div class="name-ko">미완성</div></div>
  <div class="text-option" data-id="Han9"><div class="name-en">Truth</div><div class="name-ko">진실</div></div>
  <div class="text-option" data-id="Han10"><div class="name-en">Thief</div><div class="name-ko">도둑</div></div>
</div>

<div id="bubble-text"></div>
<button id="toggle-lang">KO / EN</button>

<script>
  const video = document.getElementById('camera-view');
  const bubble = document.getElementById('bubble-text');
  let currentLang = 'en';

  const quotes = {
    Han1: { en: "If it can be expressed in one sentence, is it really art?", ko: "한 문장으로 표현이 가능하다면, 그게 예술이 맞는가?" },
    Han2: { en: "If you think you can do it too, maybe you should try.", ko: "나도 할 수 있을 것 같다면, 한 번 해보는 것도 좋을듯." },
    Han3: { en: "How many people truly equate art with life?", ko: "예술과 삶을 동일시 하는 사람이 몇이나 되겠는가." },
    Han4: { en: "If uniqueness defines art, that idea is already outdated.", ko: "유일함이 예술의 특성이란 말은, 옛 말일 뿐이다." },
    Han5: { en: "Uncomfortable to see, impossible to forget.", ko: "불편해서 눈을 피했지만, 계속 생각나더라." },
    Han6: { en: "The more technology evolves, the more extraordinary the artist becomes.", ko: "기술이 발전할수록 예술가는 더 대단해진다." },
    Han7: { en: "Perfect order leaves no room for imagination.", ko: "완벽한 질서는 상상력을 허용하지 않는다." },
    Han8: { en: "Without a viewer, it's incomplete.", ko: "보는 이가 없으면, 미완성이다." },
    Han9: { en: "If all you want is to speak the truth, go to a news studio, not a gallery.", ko: "진실만을 말하려면, 미술관이 아니라 방송국으로 가라." },
    Han10: { en: "Some works retrieve forgotten memories like a thief.", ko: "어떤 작품은 잊고 있었던 기억을 도둑처럼 찾아낸다." }
  };

  function updateLangVisibility() {
    document.querySelectorAll('.name-en').forEach(el => el.style.display = currentLang === 'en' ? 'block' : 'none');
    document.querySelectorAll('.name-ko').forEach(el => el.style.display = currentLang === 'ko' ? 'block' : 'none');
    const selected = document.querySelector('.text-option.selected');
    if (selected) {
      const quote = quotes[selected.dataset.id];
      bubble.textContent = quote[currentLang];
    }
  }

  document.querySelectorAll('.text-option').forEach(option => {
    option.addEventListener('click', () => {
      document.querySelectorAll('.text-option').forEach(el => el.classList.remove('selected'));
      option.classList.add('selected');
      const quote = quotes[option.dataset.id];
      bubble.textContent = quote[currentLang];
      bubble.style.display = 'block';
    });
  });

  document.getElementById('toggle-lang').addEventListener('click', () => {
    currentLang = currentLang === 'en' ? 'ko' : 'en';
    updateLangVisibility();
  });

  // === 드래그 기능 추가 ===
let isDragging = false, offsetX = 0, offsetY = 0;

bubble.addEventListener('mousedown', startDrag);
bubble.addEventListener('touchstart', startDrag, { passive: false });

function startDrag(e) {
  e.preventDefault();
  isDragging = true;
  const rect = bubble.getBoundingClientRect();
  const clientX = e.touches ? e.touches[0].clientX : e.clientX;
  const clientY = e.touches ? e.touches[0].clientY : e.clientY;
  offsetX = clientX - rect.left;
  offsetY = clientY - rect.top;

  document.addEventListener('mousemove', onDrag);
  document.addEventListener('mouseup', stopDrag);
  document.addEventListener('touchmove', onDrag, { passive: false });
  document.addEventListener('touchend', stopDrag);
}

function onDrag(e) {
  if (!isDragging) return;

  const clientX = e.touches ? e.touches[0].clientX : e.clientX;
  const clientY = e.touches ? e.touches[0].clientY : e.clientY;
  const bubbleWidth = bubble.offsetWidth;
  const bubbleHeight = bubble.offsetHeight;
  const maxX = window.innerWidth - bubbleWidth;
  const maxY = window.innerHeight - bubbleHeight;

  let x = clientX - offsetX;
  let y = clientY - offsetY;

  // ❗ 스티커가 화면 밖으로 나가지 않도록 제한
  x = Math.max(0, Math.min(x, maxX));
  y = Math.max(0, Math.min(y, maxY));

  bubble.style.left = `${x}px`;
  bubble.style.top = `${y}px`;
  bubble.style.transform = "translate(0, 0)";
}

function stopDrag() {
  isDragging = false;
  document.removeEventListener('mousemove', onDrag);
  document.removeEventListener('mouseup', stopDrag);
  document.removeEventListener('touchmove', onDrag);
  document.removeEventListener('touchend', stopDrag);
}

  navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
    .then(stream => video.srcObject = stream)
    .catch(err => {
      console.error("카메라 접근 실패:", err);
      alert("카메라 권한이 필요합니다.");
    });

  updateLangVisibility();
</script>

</body>
</html>
