<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add a Bubble</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      overflow: hidden;
      font-family: sans-serif;
      background: black;
    }
    #camera-view {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -1;
    }
    .text-carousel {
      position: absolute;
      bottom: 0;
      width: 100vw;
      height: 80px;
      display: flex;
      overflow-x: auto;
      background: rgba(0,0,0,0.4);
      padding: 6px;
      z-index: 10;
    }
    .text-option {
      background: white;
      color: black;
      border-radius: 12px;
      padding: 4px 10px;
      margin: 0 6px;
      cursor: pointer;
      font-size: 13px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
    }
    .text-option.selected {
      background: #f0f0f0;
    }
    .name-en { font-weight: bold; }
    .name-ko { font-size: 12px; color: #555; }

    #bubble-text {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: transparent;
      padding: 0;
      border-radius: 0;
      color: white;
      font-size: 18px;
      font-weight: bold;
      max-width: 80vw;
      text-align: center;
      z-index: 5;
      pointer-events: auto;
      cursor: grab;
      user-select: none;
      display: none;
      word-break: break-word;
    }

    .quote-en, .quote-ko { margin: 4px 0; }

    #toggle-lang, #capture, #effect-toggle, #reset {
      position: absolute;
      z-index: 10;
      background: white;
      border: none;
      border-radius: 10px;
      padding: 6px 10px;
      font-size: 14px;
      cursor: pointer;
    }

    #toggle-lang { bottom: 120px; left: 20px; font-weight: bold; }
    #capture {
      bottom: 120px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 60px;
      font-size: 25px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
    }
    #effect-toggle { bottom: 120px; right: 20px; }
    #reset { top: 20px; right: 20px; }

    .bubble-style-neon-green {
      text-shadow:
        0 0 5px #00ff90,
        0 0 10px #00ff90,
        0 0 20px #00ff90,
        0 0 40px #00ff90;
    }
    .bubble-style-neon-orange {
      text-shadow:
        0 0 5px #ffaa00,
        0 0 10px #ffaa00,
        0 0 20px #ffaa00,
        0 0 40px #ffaa00;
    }
    .bubble-style-neon-blue {
      text-shadow:
        0 0 5px #00ccff,
        0 0 10px #00ccff,
        0 0 20px #00ccff,
        0 0 40px #00ccff;
    }
    .bubble-style-green-black {
      color: black;
      text-shadow:
        0 0 5px #00ff90,
        0 0 10px #00ff90,
        0 0 20px #00ff90,
        0 0 40px #00ff90;
    }
    .bubble-style-orange-black {
      color: black;
      text-shadow:
        0 0 5px #ffaa00,
        0 0 10px #ffaa00,
        0 0 20px #ffaa00,
        0 0 40px #ffaa00;
    }
    .bubble-style-blue-black {
      color: black;
      text-shadow:
        0 0 5px #00ccff,
        0 0 10px #00ccff,
        0 0 20px #00ccff,
        0 0 40px #00ccff;
    }
  </style>
</head>
<body>
  <video id="camera-view" autoplay playsinline muted></video>
  <div class="text-carousel">
    <div class="text-option" data-id="Han1"><div class="name-en">Han1</div><div class="name-ko">Ìïú1</div></div>
    <div class="text-option" data-id="Han2"><div class="name-en">Han2</div><div class="name-ko">Ìïú2</div></div>
  </div>
  <div id="bubble-text">
    <div class="quote-en"></div>
    <div class="quote-ko"></div>
  </div>
  <button id="toggle-lang">KO / EN</button>
  <button id="capture">üì∏</button>
  <button id="effect-toggle">Effect</button>
  <button id="reset">‚Üª Reset</button>

  <script>
    const video = document.getElementById('camera-view');
    const bubble = document.getElementById('bubble-text');
    const quoteEn = document.querySelector('.quote-en');
    const quoteKo = document.querySelector('.quote-ko');

    const quotes = {
      Han1: { en: "Art?", ko: "ÏòàÏà†?" },
      Han2: { en: "Try it!", ko: "Ìï¥Î¥ê!" }
    };

    let currentLang = 'en';
    let currentEffectIndex = 0;

    const neonEffectClasses = [
      'bubble-style-neon-green',
      'bubble-style-neon-orange',
      'bubble-style-neon-blue',
      'bubble-style-green-black',
      'bubble-style-orange-black',
      'bubble-style-blue-black'
    ];

    function updateQuote(id, optionEl) {
      const quote = quotes[id];
      if (!quote) return;
      quoteEn.textContent = quote.en;
      quoteKo.textContent = quote.ko;
      bubble.style.display = 'block';
      bubble.style.left = '50%';
      bubble.style.top = '50%';
      bubble.style.transform = 'translate(-50%, -50%)';
      updateLangVisibility();
      document.querySelectorAll('.text-option').forEach(el => el.classList.remove('selected'));
      optionEl.classList.add('selected');
      bubble.classList.remove(...neonEffectClasses);
      bubble.classList.add(neonEffectClasses[currentEffectIndex]);
    }

    function updateLangVisibility() {
      quoteEn.style.display = (currentLang === 'en') ? 'block' : 'none';
      quoteKo.style.display = (currentLang === 'ko') ? 'block' : 'none';
    }

    document.querySelectorAll('.text-option').forEach(option => {
      option.addEventListener('click', () => updateQuote(option.dataset.id, option));
    });

    document.getElementById('toggle-lang').addEventListener('click', () => {
      currentLang = (currentLang === 'en') ? 'ko' : 'en';
      updateLangVisibility();
    });

    document.getElementById('effect-toggle').addEventListener('click', () => {
      bubble.classList.remove(...neonEffectClasses);
      currentEffectIndex = (currentEffectIndex + 1) % neonEffectClasses.length;
      bubble.classList.add(neonEffectClasses[currentEffectIndex]);
    });

    document.getElementById('reset').addEventListener('click', () => {
      bubble.style.display = 'none';
      quoteEn.textContent = '';
      quoteKo.textContent = '';
      document.querySelectorAll('.text-option').forEach(el => el.classList.remove('selected'));
      bubble.classList.remove(...neonEffectClasses);
      currentEffectIndex = 0;
      bubble.classList.add(neonEffectClasses[0]);
    });

    navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
      .then(stream => video.srcObject = stream)
      .catch(err => {
        console.error("Ïπ¥Î©îÎùº Ï†ëÍ∑º Ïã§Ìå®:", err);
        alert("Ïπ¥Î©îÎùº Í∂åÌïúÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.");
      });
  </script>
</body>
</html>
